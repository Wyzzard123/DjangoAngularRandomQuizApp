<div *ngIf="_userService.token">
  <h2>Quiz options</h2>
  <div class="row">
    <div class="col-xs-3 col-sm-6 col-md-4 col-lg-3 col-xl-2">
      <label>Number of Questions:</label><br/>
      <input type="number" name="no-of-questions" [(ngModel)]="quizSettings.noOfQuestions">
      <!--      <span *ngFor="let error of _registrationService.errors.password"><br/>{{ error }}</span>-->
    </div>
    <div class="col-xs-3 col-sm-6 col-md-4 col-lg-3 col-xl-2">
      <label>Number of Choices:</label><br/>
      <input type="number" name="no-of-choices" [(ngModel)]="quizSettings.noOfChoices">
    </div>
    <div class="col-xs-3 col-sm-6 col-md-4 col-lg-3 col-xl-2 mt-4">
      <button (click)="generateQuiz()" class="btn btn-primary">Generate Quiz</button>&nbsp;
    </div>

  </div>

  <!--  Generated Quiz -->
  <form [formGroup]="_newQuiz.quizForm" *ngIf="_newQuiz.quiz" (submit)="_newQuiz.onSubmit()">
    <ol style="padding-inline-start: 0">
      <div formArrayName="qna" *ngFor="let qna of _newQuiz.quizForm.get('qna')['controls']; let i=index">
        <div class="col-12">
          <li>{{qna.value.question}}</li>
          <div [formGroupName]="i">
            <div formArrayName="choices" *ngFor="let choice of qna.get('choices')['controls']; let j=index">
              <div [formGroupName]="j">
                <!--            Use fieldset to disable form-->
                <fieldset [disabled]="_newQuiz.quizForm.value.answered">
                  <input *ngIf="qna.value.questionType == 'checkbox'" [type]="qna.value.questionType"
                         [name]="qna.value.question" formControlName="selected" [value]="choice.value.selected"
                         (change)="onSelectCheckbox(choice)">
                  <input *ngIf="qna.value.questionType == 'radio'" [type]="qna.value.questionType"
                         [name]="qna.value.question" formControlName="selected" [value]="choice.value.selected"
                         (change)="onSelectRadio(qna, choice)">
                  <label style="padding-left: 10px"
                         [ngClass]="{'correct': choice.value.correct && choice.value.selected, 'wrong': choice.value.correct == false && choice.value.selected, 'correct-unchosen': choice.value.correct && !choice.value.selected}">
                    {{choice.value.choiceText}}</label>
                </fieldset>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xs-3 col-sm-6 col-md-4 col-lg-3 col-xl-2 mt-4" *ngIf="!_newQuiz.quizForm.value.answered">
        <input type="submit" value="Submit Quiz" class="btn btn-primary">&nbsp;
      </div>
      <!--      retryQuiz-->

    </ol>
  </form>
  <div class="row mt-4">
    <div class="col-xs-3 col-sm-6 col-md-4 col-lg-3 col-xl-2"
         *ngIf="_newQuiz.quiz && _newQuiz.quizForm.value.answered">
      <button (click)="generateQuiz()" class="btn btn-primary">Re-Generate Quiz</button>
    </div>
    <div class="col-xs-3 col-sm-6 col-md-4 col-lg-3 col-xl-2" *ngIf="_newQuiz.quiz && _newQuiz.quizForm.value.answered">
      <button (click)="_newQuiz.retryQuiz(_newQuiz.quizForm.value.id)" class="btn btn-primary">Retry Same Quiz</button>
    </div>
  </div>
</div>

